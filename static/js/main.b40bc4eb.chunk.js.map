{"version":3,"sources":["components/Gallery/Gallery.tsx","components/ProductDetails/ProductDetails.tsx","core-components/Dropdown/Dropdown.tsx","core-components/Button/Button.tsx","utils/ProductUtils/Product.utils.tsx","components/ProductSelector/ProductSelector.tsx","services/ProductApi/ProductApi.tsx","containers/ProductPage/ProductPage.tsx","components/Main.tsx","index.tsx"],"names":["Gallery","images","this","props","react_default","a","createElement","className","image_gallery_default","items","showNav","showThumbnails","thumbnailPosition","showFullscreenButton","showPlayButton","showBullets","React","Component","ProductDetails","details","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","Dropdown","_this$props","options","property","_","option","index","key","value","_this$props2","title","onChange","length","renderOptions","bind","Button","disabled","onClick","label","COLORS","getCupSize","variant","option2","substring","ProductUtils","formatProduct","product","image","original","concat","src1000","thumbnail","src100","bulletClass","formatImages","colors","variants","productsByColor","colorIndex","name","option1","push","hex","bands","bandSize","getBandSize","bandIndex","size","cups","id","price","stock","inventory_quantity","formatVariants","body_html","ProductSelector","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getBand","assertThisInitialized","getCup","onAddToBag","onColorSelected","onBandChange","onCupChange","selectedBand","selectedColor","selectedCup","band","cup","window","alert","color","change","colorHex","onProductSelectorChange","target","cupSize","_this$props3","lib","circleSize","circleSpacing","width","onChangeComplete","core_components_Dropdown_Dropdown","core_components_Button_Button","ProductApi","getProduct","fetch","QUERY","then","response","json","catch","error","console","ProductPage","state","onGetProductSuccess","setState","_this$state","split","_this$state2","getPrice","components_Gallery_Gallery","components_ProductSelector_ProductSelector","components_ProductDetails_ProductDetails","AppComponent","containers_ProductPage_ProductPage","ReactDOM","render","Main","document","getElementById"],"mappings":"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","file":"static/js/main.b40bc4eb.chunk.js","sourcesContent":["import React from 'react';\r\nimport ImageGallery from 'react-image-gallery';\r\nimport { Image } from '../../types/ProductTypes/Product.types';\r\n\r\nimport './Gallery.scss';\r\n\r\ntype GalleryProps = {\r\n  images: Image[]\r\n};\r\ntype GalleryState = {};\r\n\r\nclass Gallery extends React.Component<GalleryProps, GalleryState> {\r\n  render() {\r\n    const { images } = this.props;\r\n\r\n    return (\r\n      <section className=\"gallery\">\r\n        <ImageGallery items={images}\r\n                      showNav={false}\r\n                      showThumbnails={true}\r\n                      thumbnailPosition={'left'}\r\n                      showFullscreenButton={false}\r\n                      showPlayButton={false}\r\n                      showBullets={true}/>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Gallery;","import React from 'react';\r\nimport DOMPurify from 'dompurify';\r\n\r\nimport './ProductDetails.scss';\r\n\r\ntype ProductDetailsProps = {\r\n  details: any\r\n};\r\ntype ProductDetailsState = {};\r\nclass ProductDetails extends React.Component<ProductDetailsProps, ProductDetailsState> {\r\n  render() {\r\n    const { details } = this.props;\r\n\r\n    return (\r\n      <section className=\"product-details\">\r\n        <h2 className=\"product-details__title\">Details</h2>\r\n\r\n        {/* TODO: Modify API to return a json instead of plain HTML */}\r\n        <div className=\"product-details__details\"\r\n             dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(details) }}/>\r\n\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductDetails;","import React from 'react';\r\nimport * as _ from 'lodash';\r\n\r\nimport './Dropdown.scss';\r\n\r\ntype DropdownProps = {\r\n  onChange(change: any): void,\r\n  options: any,\r\n  property: string\r\n  title: string,\r\n  value: number\r\n};\r\ntype DropdownState = {};\r\nclass Dropdown extends React.Component<DropdownProps, DropdownState> {\r\n  /**\r\n   * Generates the options to be rendered depending on the props\r\n   */\r\n  renderOptions() {\r\n    const { options, property } = this.props;\r\n\r\n    return (\r\n      _.map(options, (option: any, index: number) => (\r\n        <option key={option[property]} value={index}>\r\n          { option[property] }\r\n        </option>\r\n      ))\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { title, options, onChange, value } = this.props;\r\n\r\n    return (\r\n      <div className=\"cc-dropdown\">\r\n        <span className=\"cc-dropdown__title\"> { title } </span>\r\n        <select className=\"cc-dropdown__select\" onChange={onChange} value={value}>\r\n          {\r\n            (options && options.length) && this.renderOptions.bind(this)()\r\n          }\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dropdown;","import React from 'react';\r\n\r\nimport './Button.scss';\r\n\r\ntype ButtonProps = {\r\n  disabled: boolean,\r\n  onClick: (event: any) => void,\r\n  label: string\r\n};\r\ntype ButtonState = {};\r\nclass Button extends React.Component<ButtonProps, ButtonState> {\r\n  render() {\r\n    return (\r\n      <button className=\"cc-button\"\r\n              disabled={this.props.disabled}\r\n              onClick={this.props.onClick}>{ this.props.label }\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Button;","import {\r\n  Image,\r\n  Product,\r\n  ProductsByColor,\r\n  ResponseImage,\r\n  ResponseProduct,\r\n  ResponseVariant\r\n} from '../../types/ProductTypes/Product.types';\r\nimport * as _ from 'lodash';\r\n\r\nconst COLORS = ['#ffefe5', '#dab5a1', '#d49d89', '#6a3a33', '#524346'];\r\n\r\nconst ProductUtils = {\r\n  COLORS,\r\n  formatProduct\r\n};\r\n\r\n/**\r\n * After request is performed the product needs to be parse\r\n * and status needs to be set to propagate it to children\r\n * (Preselects the first option\r\n *\r\n * @param product\r\n */\r\nfunction formatProduct(product: ResponseProduct): Product {\r\n  const images = formatImages(product.images);\r\n  const colors: ProductsByColor[] = formatVariants(product.variants);\r\n\r\n  return {\r\n    title: product.title,\r\n    details: product.body_html,\r\n    id: product.id,\r\n    colors,\r\n    images\r\n  }\r\n}\r\n\r\n/**\r\n * Given an array of images returns a new array of images on a proper format\r\n *\r\n * @param images\r\n */\r\nfunction formatImages(images: ResponseImage[]): Image[] {\r\n  const HTTPS = 'https://';\r\n\r\n  return _.map(images, (image: ResponseImage) => ({\r\n    original: `${HTTPS}${image.src1000}`,\r\n    thumbnail: `${HTTPS}${image.src100}`,\r\n    bulletClass: 'bullet-class'\r\n  }));\r\n}\r\n\r\n/**\r\n * Given an array of variants a new array of bras will be generated, grouped by color\r\n *\r\n * @param variants\r\n */\r\nfunction formatVariants(variants: ResponseVariant[]): ProductsByColor[] {\r\n  const productsByColor: ProductsByColor[] = [];\r\n\r\n  _.each(variants, (variant: ResponseVariant) => {\r\n    let colorIndex =_.findIndex(productsByColor, {name: variant.option1});\r\n    if (colorIndex === -1) {\r\n      colorIndex = productsByColor.length;\r\n      productsByColor.push({\r\n        hex: COLORS[colorIndex], // We assume only 5 different colors will be returned\r\n        name: variant.option1,\r\n        bands: []\r\n      });\r\n    }\r\n\r\n    const { bands } = productsByColor[colorIndex];\r\n    const bandSize: string = getBandSize(variant);\r\n    let bandIndex = _.findIndex(bands, {size: bandSize});\r\n\r\n    if (bandIndex === -1) {\r\n      bandIndex = bands.length;\r\n      bands.push({\r\n        size: bandSize,\r\n        cups: []\r\n      });\r\n    }\r\n\r\n    bands[bandIndex].cups.push({\r\n      id: variant.id,\r\n      price: variant.price,\r\n      stock: variant.inventory_quantity,\r\n      size: getCupSize(variant)\r\n    });\r\n  });\r\n\r\n  return productsByColor;\r\n}\r\n\r\n/**\r\n * Given a combined cup and band size returns just the \"band size\"\r\n *\r\n * @param variant\r\n */\r\nfunction getBandSize(variant: ResponseVariant): string {\r\n  return variant.option2.substring(0, 2);\r\n}\r\n\r\n/**\r\n * Given a combined cup and band size returns just the \"cup size\"\r\n *\r\n * @param variant\r\n */\r\nfunction getCupSize(variant: ResponseVariant): string {\r\n  return variant.option2.substring(2, 3);\r\n}\r\n\r\n\r\nexport default ProductUtils;","import React from 'react';\r\nimport Dropdown from '../../core-components/Dropdown/Dropdown';\r\nimport { CirclePicker, ColorResult } from 'react-color';\r\nimport Button from \"../../core-components/Button/Button\";\r\nimport {\r\n  ProductChange, ProductsByBand,\r\n  ProductsByColor,\r\n  ProductsByCup\r\n} from '../../types/ProductTypes/Product.types';\r\n\r\nimport './ProductSelector.scss';\r\nimport ProductUtils from '../../utils/ProductUtils/Product.utils';\r\n\r\nconst SIZE_PROPERTY = 'size';\r\nconst BUTTON_LABEL = 'Add to Bag';\r\n\r\ntype ProductSelectorProps = {\r\n  productsByColor: ProductsByColor[],\r\n  onProductSelectorChange(change: ProductChange): void,\r\n  selectedBand: number,\r\n  selectedColor: number,\r\n  selectedCup: number,\r\n  title: string\r\n};\r\ntype ProductSelectorState = {};\r\n\r\n/**\r\n * Product selector will contain the options user could customize\r\n */\r\nclass ProductSelector extends React.Component<ProductSelectorProps, ProductSelectorState> {\r\n  constructor(props: ProductSelectorProps) {\r\n    super(props);\r\n    this.getBand = this.getBand.bind(this);\r\n    this.getCup = this.getCup.bind(this);\r\n    this.onAddToBag = this.onAddToBag.bind(this);\r\n    this.onColorSelected = this.onColorSelected.bind(this);\r\n    this.onBandChange = this.onBandChange.bind(this);\r\n    this.onCupChange = this.onCupChange.bind(this);\r\n  }\r\n  /**\r\n   * Returns the selected band\r\n   */\r\n  getBand(): ProductsByBand {\r\n    const { productsByColor, selectedBand, selectedColor } = this.props;\r\n    return productsByColor[selectedColor].bands[selectedBand];\r\n  }\r\n\r\n  /**\r\n   * Returns the selected cup\r\n   */\r\n  getCup(): ProductsByCup {\r\n    const { productsByColor, selectedBand, selectedColor, selectedCup } = this.props;\r\n    return productsByColor[selectedColor].bands[selectedBand].cups[selectedCup];\r\n  }\r\n\r\n  /**\r\n   * Handles click on \"Add to bug\" button and shows an alert with the selected product\r\n   */\r\n  onAddToBag() {\r\n    const { title } = this.props;\r\n    const band: ProductsByBand = this.getBand();\r\n    const cup: ProductsByCup = this.getCup();\r\n\r\n    window.alert(`Added a ${title} - ${band.size}${cup.size} to the cart`);\r\n  }\r\n\r\n  /**\r\n   * Handles a change on the selected color and sends the change to the parent\r\n   * @param color\r\n   */\r\n  onColorSelected(color: ColorResult) {\r\n    const change: ProductChange = { colorHex: color.hex };\r\n    this.props.onProductSelectorChange(change);\r\n  }\r\n\r\n  /**\r\n   * Handles a change on the selected band and sends the change to the parent\r\n   * @param band\r\n   */\r\n  onBandChange(band: any): void {\r\n    const change: ProductChange = { bandSize: band.target.value };\r\n    this.props.onProductSelectorChange(change);\r\n  }\r\n\r\n  /**\r\n   * Handles a change on the selected cup and sends the change to the parent\r\n   * @param cup\r\n   */\r\n  onCupChange(cup: any): void {\r\n    const change: ProductChange = { cupSize: cup.target.value };\r\n    this.props.onProductSelectorChange(change);\r\n  }\r\n\r\n  render() {\r\n    const { productsByColor, selectedColor, selectedBand, selectedCup } = this.props;\r\n\r\n    const band = this.getBand();\r\n    const cup = this.getCup();\r\n\r\n    return (\r\n      <section className=\"product-selector\">\r\n        <div className=\"product-selector__color-container\">\r\n\r\n          <p className=\"product-selector__row\">\r\n            <span className=\"product-selector__row--title\"> COLOR: </span>\r\n            <span className=\"product-selector__row--value\">\r\n                {productsByColor[selectedColor].name}\r\n              </span>\r\n          </p>\r\n\r\n          <div className=\"product-selector__color-container__color-picker\">\r\n            <CirclePicker colors={ProductUtils.COLORS}\r\n                          circleSize={30}\r\n                          circleSpacing={27.5}\r\n                          width={'300px'}\r\n                          onChangeComplete={this.onColorSelected}/>\r\n          </div>\r\n\r\n          <p className=\"product-selector__row\">\r\n            <span className=\"product-selector__row--title\"> STOCK: </span>\r\n            <span className=\"product-selector__row--value\">\r\n              {cup.stock}\r\n            </span>\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"product-selector__dropdown-container\r\n                        product-selector__dropdown-container--left\">\r\n          <Dropdown title={'Band Size'}\r\n                    options={productsByColor[selectedColor].bands}\r\n                    value={selectedBand}\r\n                    onChange={this.onBandChange}\r\n                    property={SIZE_PROPERTY}/>\r\n        </div>\r\n\r\n        <div className=\"product-selector__dropdown-container\r\n                        product-selector__dropdown-container--right\">\r\n          <Dropdown title={'Cup Size'}\r\n                    options={band.cups}\r\n                    value={selectedCup}\r\n                    onChange={this.onCupChange}\r\n                    property={SIZE_PROPERTY}/>\r\n        </div>\r\n\r\n        <Button onClick={this.onAddToBag} label={BUTTON_LABEL} disabled={cup.stock === 0}/>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductSelector;","const ProductApi = {\r\n  getProduct\r\n};\r\n\r\nconst QUERY: string = 'https://www.mocky.io/v2/5c6c3a92320000e83bbef971';\r\n\r\n/**\r\n * Performs the call to get the product\r\n */\r\nfunction getProduct() {\r\n  return window.fetch(QUERY)\r\n    .then(response => response.json())\r\n    .then(response => response.product)\r\n    .catch(error => console.error(error)); // TODO: Add an error handler\r\n}\r\n\r\nexport default ProductApi;","import React from 'react';\r\nimport Gallery from '../../components/Gallery/Gallery';\r\nimport ProductDetails from '../../components/ProductDetails/ProductDetails';\r\nimport ProductSelector from '../../components/ProductSelector/ProductSelector';\r\nimport {\r\n  Image,\r\n  Product,\r\n  ProductChange,\r\n  ProductsByColor,\r\n} from '../../types/ProductTypes/Product.types';\r\nimport ProductApi from '../../services/ProductApi/ProductApi';\r\nimport ProductUtils from '../../utils/ProductUtils/Product.utils';\r\nimport * as _ from 'lodash';\r\n\r\nimport './ProductPage.scss';\r\n\r\ntype ProductProps = {};\r\ntype ProductState = {\r\n  productsByColor: ProductsByColor[],\r\n  images: Image[],\r\n  details: string,\r\n  selectedBand: number,\r\n  selectedColor: number,\r\n  selectedCup: number,\r\n  title: string\r\n};\r\nclass ProductPage extends React.Component<ProductProps, ProductState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      images: [],\r\n      details: '',\r\n      productsByColor: [],\r\n      selectedBand: 0,\r\n      selectedColor: 0,\r\n      selectedCup: 0,\r\n      title: ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Hook to be executed after component is mounted\r\n   */\r\n  componentDidMount() {\r\n    ProductApi.getProduct()\r\n      .then(ProductUtils.formatProduct)\r\n      .then(this.onGetProductSuccess.bind(this));\r\n  }\r\n\r\n  onGetProductSuccess(product: Product) {\r\n    const { images, colors, title, details } = product;\r\n    this.setState({\r\n      productsByColor: colors,\r\n      images,\r\n      details,\r\n      title\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sets the new state when a new color is selected\r\n   */\r\n  onProductSelectorChange(change: ProductChange) {\r\n    if(change.colorHex) {\r\n      const index: number =_.findIndex(this.state.productsByColor, {hex: change.colorHex});\r\n\r\n      this.setState({\r\n        selectedColor: index,\r\n        selectedBand: 0,\r\n        selectedCup: 0,\r\n      })\r\n    } else if(change.bandSize) {\r\n      this.setState({\r\n        selectedBand: change.bandSize,\r\n        selectedCup: 0,\r\n      })\r\n    } else if(change.cupSize) {\r\n      this.setState({\r\n        selectedCup: change.cupSize\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a formatted price to be correctly displayed\r\n   */\r\n  getPrice(): string {\r\n    const { selectedBand, selectedColor, selectedCup, productsByColor } = this.state;\r\n    let { price } = productsByColor[selectedColor].bands[selectedBand].cups[selectedCup];\r\n    price = price.split('.')[0];\r\n\r\n    return `$${price}`;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      details,\r\n      images,\r\n      selectedBand,\r\n      selectedColor,\r\n      selectedCup,\r\n      productsByColor,\r\n      title\r\n    } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        {\r\n          !_.isEmpty(productsByColor) &&\r\n            <section className=\"product-page\">\r\n              <div className=\"product-page__title\">\r\n                <h1 className=\"product-page__title__label\"> { title } </h1>\r\n                <h3 className=\"product-page__title__price\">\r\n                  {!_.isEmpty(productsByColor) && this.getPrice.bind(this)() }\r\n                </h3>\r\n              </div>\r\n\r\n              <article className=\"product-page__gallery\">\r\n                <Gallery images={images}/>\r\n              </article>\r\n\r\n              <article className=\"product-page__selector\">\r\n                <ProductSelector productsByColor={productsByColor}\r\n                                 onProductSelectorChange={this.onProductSelectorChange.bind(this)}\r\n                                 selectedBand={selectedBand}\r\n                                 selectedColor={selectedColor}\r\n                                 selectedCup={selectedCup}\r\n                                 title={title}/>\r\n              </article>\r\n\r\n              <ProductDetails details={details}/>\r\n\r\n            </section>\r\n        }\r\n\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductPage;","import React from 'react';\r\nimport ProductPage from '../containers/ProductPage/ProductPage';\r\n\r\nclass AppComponent extends React.Component {\r\n  render() {\r\n    return (\r\n      <ProductPage/>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppComponent;\r\n","import 'react-app-polyfill/ie9';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/Main';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}